<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>2D Survival Game</title>
    <style>
        body { 
            margin: 0; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            background-color: #333; 
            font-family: Arial, sans-serif;
        }
        canvas { 
            background-color: #87CEEB; 
            border: 2px solid black;
        }
        #hud {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            font-size: 16px;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div id="hud">
        <div>‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ: <span id="health">100</span></div>
        <div>üå≤ –î–µ—Ä–µ–≤–æ: <span id="woodCount">0</span></div>
        <div>ü™® –ö–∞–º–µ–Ω—å: <span id="stoneCount">0</span></div>
        <div>üõ†Ô∏è –ö—Ä–∞—Ñ—Ç–∏–Ω–≥: <button onclick="craftAxe()">–°–∫—Ä–∞—Ñ—Ç–∏—Ç—å —Ç–æ–ø–æ—Ä (5 –¥–µ—Ä–µ–≤–∞, 3 –∫–∞–º–Ω—è)</button></div>
    </div>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        const tileSize = 40; 
        const playerSize = 20;

        // –ò–≥—Ä–æ–∫
        const player = {
            x: 100,
            y: 100,
            color: 'green',
            speed: 4,
            health: 100,
            inventory: { wood: 0, stone: 0 }
        };

        // –†–µ—Å—É—Ä—Å—ã –∏ –≤—Ä–∞–≥–∏
        const resources = [];
        const enemies = [];

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç—ã —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∏ –≤—Ä–∞–≥–∞–º–∏
        function generateMap() {
            for (let i = 0; i < 10; i++) {
                resources.push({ x: Math.random() * canvas.width, y: Math.random() * canvas.height, type: 'wood', color: 'brown' });
                resources.push({ x: Math.random() * canvas.width, y: Math.random() * canvas.height, type: 'stone', color: 'gray' });
            }
            for (let i = 0; i < 5; i++) {
                enemies.push({ x: Math.random() * canvas.width, y: Math.random() * canvas.height, color: 'red', size: 20, speed: 1 });
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–≥—Ä–æ–∫–∞
        function drawPlayer() {
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x, player.y, playerSize, playerSize);
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
        function drawResources() {
            resources.forEach(resource => {
                ctx.fillStyle = resource.color;
                ctx.fillRect(resource.x, resource.y, tileSize / 2, tileSize / 2);
            });
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≤—Ä–∞–≥–æ–≤
        function drawEnemies() {
            enemies.forEach(enemy => {
                ctx.fillStyle = enemy.color;
                ctx.fillRect(enemy.x, enemy.y, enemy.size, enemy.size);
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–∞–≥–æ–≤
        function updateEnemies() {
            enemies.forEach(enemy => {
                const dx = player.x - enemy.x;
                const dy = player.y - enemy.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < 100) { 
                    enemy.x += (dx / distance) * enemy.speed;
                    enemy.y += (dy / distance) * enemy.speed;
                }
                
                if (distance < playerSize) {
                    player.health -= 0.1; 
                    if (player.health <= 0) {
                        alert("–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!");
                        resetGame();
                    }
                    document.getElementById('health').textContent = Math.floor(player.health);
                }
            });
        }

        // –°–±–æ—Ä —Ä–µ—Å—É—Ä—Å–æ–≤
        function collectResources() {
            resources.forEach((resource, index) => {
                const dx = player.x - resource.x;
                const dy = player.y - resource.y;
                if (Math.abs(dx) < tileSize && Math.abs(dy) < tileSize) {
                    player.inventory[resource.type]++;
                    resources.splice(index, 1); 
                    updateInventory();
                }
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
        function updateInventory() {
            document.getElementById('woodCount').textContent = player.inventory.wood;
            document.getElementById('stoneCount').textContent = player.inventory.stone;
        }

        // –ö—Ä–∞—Ñ—Ç —Ç–æ–ø–æ—Ä–∞
        function craftAxe() {
            if (player.inventory.wood >= 5 && player.inventory.stone >= 3) {
                player.inventory.wood -= 5;
                player.inventory.stone -= 3;
                alert("–í—ã —Å–∫—Ä–∞—Ñ—Ç–∏–ª–∏ —Ç–æ–ø–æ—Ä!");
                updateInventory();
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –∫—Ä–∞—Ñ—Ç–∞!");
            }
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–º
        function movePlayer(event) {
            switch (event.key) {
                case 'ArrowUp': player.y -= player.speed; break;
                case 'ArrowDown': player.y += player.speed; break;
                case 'ArrowLeft': player.x -= player.speed; break;
                case 'ArrowRight': player.x += player.speed; break;
            }
            collectResources();
        }

        // –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –∏–≥—Ä—ã
        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawPlayer();
            drawResources();
            drawEnemies();
            updateEnemies();
            requestAnimationFrame(gameLoop);
        }

        // –°–±—Ä–æ—Å –∏–≥—Ä—ã
        function resetGame() {
            player.health = 100;
            player.inventory.wood = 0;
            player.inventory.stone = 0;
            resources.length = 0;
            enemies.length = 0;
            generateMap();
            updateInventory();
            document.getElementById('health').textContent = player.health;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        generateMap();
        document.addEventListener('keydown', movePlayer);
        gameLoop();
    </script>
</body>
</html>
